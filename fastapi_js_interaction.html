<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastAPI + JS Interaction Example</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .code { background: #f5f5f5; padding: 10px; border-radius: 3px; font-family: monospace; }
        .arrow { font-size: 24px; text-align: center; margin: 10px 0; }
        .browser { background: #e3f2fd; }
        .server { background: #f3e5f5; }
        .http { background: #fff3e0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ FastAPI + JavaScript –í–∑–∞—î–º–æ–¥—ñ—è</h1>
        
        <div class="step browser">
            <h3>1Ô∏è‚É£ –ë—Ä–∞—É–∑–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î HTML —Å—Ç–æ—Ä—ñ–Ω–∫—É</h3>
            <div class="code">
                GET http://127.0.0.1:8000/auth/register-page
            </div>
            <p>FastAPI –≤—ñ–¥–¥–∞—î HTML —Ñ–∞–π–ª –∑ JavaScript –∫–æ–¥–æ–º</p>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step server">
            <h3>2Ô∏è‚É£ FastAPI –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç</h3>
            <div class="code">
@router.get("/register-page")<br>
def render_register_page(request: Request):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return templates.TemplateResponse("register.html", {"request": request})
            </div>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step browser">
            <h3>3Ô∏è‚É£ JavaScript –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ</h3>
            <div class="code">
// –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î Submit<br>
document.getElementById('registerForm').addEventListener('submit', async function(event) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;event.preventDefault();<br>
&nbsp;&nbsp;&nbsp;&nbsp;// –ó–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ –∑ —Ñ–æ—Ä–º–∏<br>
&nbsp;&nbsp;&nbsp;&nbsp;const formData = new FormData(form);<br>
&nbsp;&nbsp;&nbsp;&nbsp;const data = Object.fromEntries(formData.entries());<br>
});
            </div>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step http">
            <h3>4Ô∏è‚É£ JavaScript —Ä–æ–±–∏—Ç—å HTTP –∑–∞–ø–∏—Ç</h3>
            <div class="code">
const response = await fetch('/auth/', {<br>
&nbsp;&nbsp;&nbsp;&nbsp;method: 'POST',<br>
&nbsp;&nbsp;&nbsp;&nbsp;headers: { 'Content-Type': 'application/json' },<br>
&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify({<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username: "john",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email: "john@example.com",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password: "secret123"<br>
&nbsp;&nbsp;&nbsp;&nbsp;})<br>
});
            </div>
            <p><strong>HTTP Request:</strong> POST http://127.0.0.1:8000/auth/</p>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step server">
            <h3>5Ô∏è‚É£ FastAPI –æ—Ç—Ä–∏–º—É—î —ñ –æ–±—Ä–æ–±–ª—è—î –¥–∞–Ω—ñ</h3>
            <div class="code">
@router.post('/', status_code=201)<br>
async def create_user(create_user_request: CreateUserRequest):<br>
&nbsp;&nbsp;&nbsp;&nbsp;# create_user_request.username = "john"<br>
&nbsp;&nbsp;&nbsp;&nbsp;# create_user_request.email = "john@example.com"<br>
&nbsp;&nbsp;&nbsp;&nbsp;# –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö<br>
&nbsp;&nbsp;&nbsp;&nbsp;user = Users(**create_user_request.dict())<br>
&nbsp;&nbsp;&nbsp;&nbsp;db.add(user)<br>
&nbsp;&nbsp;&nbsp;&nbsp;db.commit()
            </div>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step http">
            <h3>6Ô∏è‚É£ FastAPI –ø–æ–≤–µ—Ä—Ç–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å</h3>
            <div class="code">
HTTP/1.1 201 Created<br>
Content-Type: application/json<br>
<br>
{"message": "User created successfully"}
            </div>
        </div>

        <div class="arrow">‚¨áÔ∏è</div>

        <div class="step browser">
            <h3>7Ô∏è‚É£ JavaScript –æ–±—Ä–æ–±–ª—è—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å</h3>
            <div class="code">
if (response.ok) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;// –£—Å–ø—ñ—Ö - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞<br>
&nbsp;&nbsp;&nbsp;&nbsp;window.location.href = '/auth/login-page';<br>
} else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;// –ü–æ–º–∏–ª–∫–∞ - –ø–æ–∫–∞–∑—É—î–º–æ alert<br>
&nbsp;&nbsp;&nbsp;&nbsp;const errorData = await response.json();<br>
&nbsp;&nbsp;&nbsp;&nbsp;alert(`Error: ${errorData.detail}`);<br>
}
            </div>
        </div>

        <hr style="margin: 30px 0;">

        <div class="step">
            <h3>üîë –ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:</h3>
            <ul>
                <li><strong>URL –ø—É—Ç–∏:</strong> JavaScript –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—ñ –∂ URL —â–æ –π FastAPI —Ä–æ—É—Ç–µ—Ä–∏</li>
                <li><strong>JSON —Ñ–æ—Ä–º–∞—Ç:</strong> –î–∞–Ω—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç—ñ</li>
                <li><strong>HTTP –º–µ—Ç–æ–¥–∏:</strong> GET, POST, PUT, DELETE</li>
                <li><strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</strong> Content-Type, Authorization</li>
                <li><strong>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å:</strong> JavaScript –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î async/await –¥–ª—è HTTP –∑–∞–ø–∏—Ç—ñ–≤</li>
            </ul>
        </div>

        <div class="step">
            <h3>üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É:</h3>
            <div class="code">
fastapi_project/<br>
‚îú‚îÄ‚îÄ main.py&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# FastAPI –¥–æ–¥–∞—Ç–æ–∫<br>
‚îú‚îÄ‚îÄ routers/<br>
‚îÇ&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ auth.py&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# –†–æ—É—Ç–µ—Ä–∏ (@router.post('/'), @router.get('/register-page'))<br>
‚îî‚îÄ‚îÄ templates/<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ register.html&nbsp;&nbsp;# HTML + JavaScript –∫–æ–¥
            </div>
        </div>
    </div>
</body>
</html>